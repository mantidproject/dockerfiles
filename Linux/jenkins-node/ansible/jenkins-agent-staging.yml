- name: Deploy Docker-based Jenkins agent for Mantid builds
  hosts: all
  vars:
    package_updates_reboot: true
    deploy_type: staging
    jenkins_url: https://builds.a.staging-mantidproject.stfc.ac.uk # https://builds.b.staging-mantidproject.stfc.ac.uk
    pip_install_packages:
      - name: docker

  roles:
    - role: setup
      tags: "initial-setup"
    - role: interactive_users
      tags: "initial-setup"      
    - role: geerlingguy.pip
      become: yes
      tags: "initial-setup"      
    - role: geerlingguy.docker
      become: yes
      tags: "initial-setup"      
    - role: agent
      become: yes
      tags: "agent"
